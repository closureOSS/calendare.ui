<mat-card class="members" *transloco="let t">
  <mat-card-header>
    <mat-card-title>
      <ng-content></ng-content>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <a9-http-resource-viewer [resource]="members">
      @let ms = members.value();
      @for(grp of ms?.groups; track grp.group) {
      @if(grp.members && grp.members.length > 0 && grp.group && grp.group.membershipType) {
      <div class="priv-class">{{grp.group.membershipType.replace('Proxy','')}}</div>
      <div class="memberlist">
        @for(m of grp.members; track m.uri) {
        <span class="member">
          <a matButton [routerLink]="['/principal', 'show', m.username]">
            <cal-principal-ref [type]="m.principalType" [name]="m.displayname"></cal-principal-ref>
          </a>
        </span>
        }
      </div>
      }
      }
    </a9-http-resource-viewer>
  </mat-card-content>
  <!-- <pre class="debug">{{memberships() | json}}</pre> -->
  <mat-card-actions>
    <a9-action-bar>
      <button matButton [routerLink]="['/principal', 'members', username()]">{{ t('Edit') }}</button>
      <button matButton (click)="refresh()">{{ t('Refresh') }}</button>
    </a9-action-bar>
  </mat-card-actions>
</mat-card>
